<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {margin:0;font-family:Arial, sans-serif;background:#f3f4f6;}
    .container {padding:20px;}
    
    h1 {text-align:center;margin:20px 0;color:#1f2937;}
    
    table {width:100%;border-collapse:collapse;margin-top:20px;}
    table, th, td {border:1px solid #ccc;}
    th, td {padding:10px;text-align:center;}
    th {background:#4f46e5;color:white;}
    tr:nth-child(even){background:#f9f9f9;}
    
    button {
      padding:8px 12px;
      background:#ef4444;
      color:white;
      border:none;
      border-radius:6px;
      cursor:pointer;
    }
    button:hover {background:#dc2626;}
    
    .logout {
      display:block;
      margin:20px auto;
      padding:10px 16px;
      background:#4f46e5;
      border-radius:8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>⚙️ Admin Panel</h1>
    <p style="text-align:center;">Welcome, <b id="adminName"></b></p>

    <table>
      <thead>
        <tr>
          <th>Username</th>
          <th>Password</th>
          <th>Coins</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="userTable"></tbody>
    </table>

    <button class="logout" onclick="logout()">Logout</button>
  </div>

<script>
  // Load Users
  let users = JSON.parse(localStorage.getItem("users")) || [];
  let currentUser = localStorage.getItem("currentUser");

  // Check if admin
  if(currentUser !== "admin"){
    alert("⛔ Access Denied! Only admin can open this page.");
    window.location.href="index.html";
  } else {
    document.getElementById("adminName").innerText = currentUser;
  }

  // Show all users
  function loadUsers(){
    let tbody=document.getElementById("userTable");
    tbody.innerHTML="";
    users.forEach((u,i)=>{
      tbody.innerHTML+=`
        <tr>
          <td>${u.user}</td>
          <td>${u.pass}</td>
          <td>${u.coins}</td>
          <td><button onclick="deleteUser(${i})">Delete</button></td>
        </tr>`;
    });
  }

  // Delete User
  function deleteUser(i){
    if(users[i].user==="admin"){alert("⚠️ You cannot delete admin!");return;}
    if(confirm("Are you sure to delete "+users[i].user+" ?")){
      users.splice(i,1);
      localStorage.setItem("users",JSON.stringify(users));
      loadUsers();
    }
  }

  // Logout
  function logout(){
    localStorage.removeItem("currentUser");
    window.location.href="index.html";
  }

  loadUsers();
</script>
</body>
</html>
