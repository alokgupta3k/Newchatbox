<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Permanent Chat with Saved Name</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">
  <div class="w-full max-w-md bg-white rounded-2xl shadow-lg flex flex-col">
    <div class="p-4 bg-blue-600 text-white rounded-t-2xl text-xl font-bold">
      Local Chat (Permanent)
    </div>
    <div id="chatBox" class="flex-1 overflow-y-auto p-4 space-y-2"></div>
    <div class="p-3 flex">
      <input id="msgInput" type="text" placeholder="Type a message..." class="flex-1 border rounded-l-lg p-2">
      <button onclick="sendMessage()" class="bg-blue-600 text-white px-4 rounded-r-lg">Send</button>
    </div>
  </div>

<script>
  // ðŸ‘¤ Username Save in LocalStorage
  let username = localStorage.getItem("chatUsername");
  if (!username) {
    username = prompt("Enter your name:");
    localStorage.setItem("chatUsername", username);
  }

  // Load saved messages from localStorage
  function loadMessages() {
    const messages = JSON.parse(localStorage.getItem("chatMessages") || "[]");
    const chatBox = document.getElementById("chatBox");
    chatBox.innerHTML = "";
    messages.forEach(m => {
      const msgDiv = document.createElement("div");
      msgDiv.classList = "p-2 rounded-lg " + 
        (m.user === username ? "bg-blue-500 text-white self-end" : "bg-gray-200");
      msgDiv.innerText = m.user + ": " + m.message;
      chatBox.appendChild(msgDiv);
    });
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  // Send message
  function sendMessage() {
    const msgInput = document.getElementById("msgInput");
    const message = msgInput.value;
    if (message.trim() !== "") {
      const messages = JSON.parse(localStorage.getItem("chatMessages") || "[]");
      messages.push({ user: username, message: message });
      localStorage.setItem("chatMessages", JSON.stringify(messages));
      msgInput.value = "";
      loadMessages();
    }
  }

  // Load on start
  loadMessages();
</script>
</body>
</html>